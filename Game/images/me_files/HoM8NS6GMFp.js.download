if (self.CavalryLogger) { CavalryLogger.start_js(["8\/SiA"]); }

__d("XSaveCountStoryPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/saved_for_later\/save_count\/story_preview\/",{story_ent_identifier:{type:"String",required:true}});}),null);
__d('SaveCountStoryPreview.react',['cx','invariant','AsyncRequest','LoadObject','React','XSaveCountStoryPreviewController','XUINotice.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n);this.state={loadObject:c('LoadObject').empty()};}l.prototype.componentDidMount=function(){this.$SaveCountStoryPreview2(this.props.storyIdentifier);};l.prototype.componentWillReceiveProps=function(m){if(m.storyIdentifier!==this.props.storyIdentifier)this.$SaveCountStoryPreview2(m.storyIdentifier);};l.prototype.componentWillUnmount=function(){if(this.$SaveCountStoryPreview1)this.$SaveCountStoryPreview1.abandon();};l.prototype.$SaveCountStoryPreview2=function(m){if(this.$SaveCountStoryPreview1)this.$SaveCountStoryPreview1.abandon();var n=function(){var p='Error rendering story with identifier '+this.props.storyIdentifier;this.setState({loadObject:this.state.loadObject.removeOperation().setError(new Error(p))});}.bind(this),o=c('XSaveCountStoryPreviewController').getURIBuilder().setString('story_ent_identifier',m).getURI();this.$SaveCountStoryPreview1=new (c('AsyncRequest'))(o).setHandler(function(p){if(!p.payload){n();return;}this.setState({loadObject:this.state.loadObject.removeOperation().setValue(p.payload)});}.bind(this)).setErrorHandler(n);this.$SaveCountStoryPreview1.send();this.setState({loadObject:c('LoadObject').loading()});};l.prototype.render=function(){var m=this.state.loadObject.isLoading()?"_r1j":'hidden_elem',n=c('React').createElement('div',null);if(this.state.loadObject.hasValue())n=c('React').createElement('div',{className:"_r1l",dangerouslySetInnerHTML:this.state.loadObject.getValue()});var o=c('React').createElement('div',null);if(this.state.loadObject.hasError()){var p=this.state.loadObject.getError();!!p||i(0);o=c('React').createElement('div',null,c('React').createElement(c('XUINotice.react'),null,p.message));}return c('React').createElement('div',{className:"_r1n"},c('React').createElement('div',null,c('React').createElement('div',{className:m},c('React').createElement(c('XUISpinner.react'),{size:'large'})),o,n));};f.exports=l;}),null);
__d('UFIReactionsSaveDialog.react',['ix','cx','fbt','Banzai','CollectionCurationMechanisms','CollectionsDisplaySurface','Image.react','LayerFadeOnHide','Link.react','React','SaveCountStoryPreview.react','Text.react','URI','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','fbglyph','guid'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m='saved_for_later:click';k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);this.$UFIReactionsSaveDialog1=function(){if(!this.props.isSaveCountLink)return;c('Banzai').post(m,{collection_id:this.props.collectionId,surface:c('CollectionsDisplaySurface').STORY,mechanism:c('CollectionCurationMechanisms').SAVE_COUNT,event_id:c('guid')()},{retry:true,delay:0});this.setState({dialogShown:true});}.bind(this);this.$UFIReactionsSaveDialog2=function(q){this.setState({dialogShown:q});}.bind(this);this.$UFIReactionsSaveDialog3=function(){c('Banzai').post(m,{collection_id:this.props.collectionId,surface:c('CollectionsDisplaySurface').SAVE_COUNT_DIALOG,mechanism:c('CollectionCurationMechanisms').LEARN_MORE_LINK,event_id:c('guid')()},{retry:true,delay:0});}.bind(this);this.state={dialogShown:false};}n.prototype.$UFIReactionsSaveDialog4=function(){'use strict';if(!this.state.dialogShown||!this.props.isSaveCountLink)return null;var o=c('React').createElement(c('SaveCountStoryPreview.react'),{storyIdentifier:this.props.storyId}),p=c('React').createElement(c('Image.react'),{className:"_25c1",src:h("124190")}),q=j._("Save videos, posts and more to your Saved items. You can save this post by clicking on {dropdown_menu_icon} in the top right corner of the post and selecting '{caret_menu_save_button_title}'. Only you can see the things you save.",[j.param('dropdown_menu_icon',p),j.param('caret_menu_save_button_title',this.props.buttonText===null?'Save':this.props.buttonText)]);return c('React').createElement(c('XUIDialog.react'),{causalElementRef:function(){return this.refs.button;}.bind(this),shown:this.state.dialogShown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this.$UFIReactionsSaveDialog2,width:500},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,c('React').createElement(c('Image.react'),{className:"_25c2",src:h("116047")}),c('React').createElement('span',{className:"_25c3"},j._("Save Things For Later")))),c('React').createElement(c('XUIDialogBody.react'),null,q,o),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:c('React').createElement(c('Link.react'),{className:"_25c4",href:new (c('URI'))('/help/220284408163249'),target:'_blank',onClick:this.$UFIReactionsSaveDialog3},j._("How to Find Your Saved Items"))},c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'cancel'})));};n.prototype.render=function(){'use strict';var o=this.props.isSaveCountLink?c('React').createElement('a',{'aria-live':'polite',className:"_ipm",onClick:this.$UFIReactionsSaveDialog1,ref:'button',role:'button',tabIndex:'0'},j._({"Save":"{count} Save","Saves":"{count} Saves"},[j.param('count',this.props.saveCount),j['enum'](this.props.saveCount===1?'Save':'Saves',{Save:'Save',Saves:'Saves'})])):c('React').createElement(c('Text.react'),{className:"_ipm"},j._({"Save":"{count} Save","Saves":"{count} Saves"},[j.param('count',this.props.saveCount),j['enum'](this.props.saveCount===1?'Save':'Saves',{Save:'Save',Saves:'Saves'})]));return c('React').createElement('div',null,this.$UFIReactionsSaveDialog4(),o);};f.exports=n;}),null);