if (self.CavalryLogger) { CavalryLogger.start_js(["UnND7"]); }

__d('BrowsePhotoActions',['csx','cx','Arbiter','AsyncRequest','CSS','DOMQuery','Event','Parent','SelectorDeprecated','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i){function j(k,l){this.element=k;this.target=l;this.init();}Object.assign(j.prototype,{init:function k(){if(this.element){c('Event').listen(this.element,'click',this.handleClick.bind(this));var l=c('DOMQuery').scry(this.element,'.uiSelector')[0];if(l)this.initDeprecatedSelector(l);}c('Arbiter').subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive'],this.handleUFIActions.bind(this));},initDeprecatedSelector:function k(l){c('SelectorDeprecated').listen(l,['open','close'],function(m){var n=c('CSS').toggleClass.bind(null,c('Parent').bySelector(l,"._4313"),"_424_",m==='open');if(m==='open'){n();}else c('requestAnimationFrame')(n);});},handleClick:function k(event){var l=event.getTarget();if(c('Parent').bySelector(l,"._ai7"))return this.handleLike(event);},handleLike:function k(event,l){c('CSS').toggleClass(this.element,"_ai5");var m=c('DOMQuery').scry(this.element,"_53z").length>0;new (c('AsyncRequest'))().setURI('/ajax/browse/photo_actions.php').setData({fbid:this.element.getAttribute('data-fbid'),action:'like',noupdate:!m}).setRelativeTo(this.element).setErrorHandler(function(){c('CSS').toggleClass(this.element,"_ai5");}.bind(this)).send();},handleUFIActions:function k(l,m){if(parseInt(this.element.getAttribute('data-fbid'),10)!==m)return;if(l==='UFI/LikeActive')c('CSS').toggleClass(this.element,"_ai5");new (c('AsyncRequest'))().setURI('/ajax/browse/photo_actions.php').setData({fbid:this.element.getAttribute('data-fbid'),action:'comment'}).setRelativeTo(this.element).send();}});f.exports=j;}),null);
__d('BrowseSlidePhoto',['ArbiterMixin','BrowseMouse','Style','Vector'],(function a(b,c,d,e,f,g){function h(i,j,k,l){this._root=i;this._bio=j;this._contents=k;this._hovercardOn=false;this.target=l&&l.target;this.initEvents();this.expand();}Object.assign(h.prototype,c('ArbiterMixin'),{initEvents:function i(){c('BrowseMouse').onMouseOver(this._root,this.mouseenter.bind(this));if(this.target){this.target.subscribe('showhovercard',this.showhovercard.bind(this));this.target.subscribe('hidehovercard',this.hidehovercard.bind(this));}},expand:function i(){var j=c('Vector').getElementDimensions(this._contents).y;if(j>0){c('Style').set(this._bio,'height',j-1+'px');c('Style').set(this._contents,'opacity',1);}},collapse:function i(){c('Style').set(this._bio,'height',0);c('Style').set(this._contents,'opacity',0);},mouseenter:function i(){if(!this._hovercardOn)clearTimeout(this._hovercardTimeout);},showhovercard:function i(){this._hovercardOn=true;c('Style').set(this._contents,'opacity',1);},hidehovercard:function i(){this._hovercardOn=false;}});f.exports=h;}),null);